---
const themeColor = "var(--primary-color)";
---

<div
  id="yt-player"
  class="fixed bottom-0 left-0 right-0 z-50 h-16 flex items-center px-4"
  style={`background: color-mix(in oklch, ${themeColor} 15%, black);`}
>
  <div id="player"></div>
  <div class="ml-4 text-sm text-white truncate">
    <span id="track-title">Loadingâ€¦</span>
  </div>
</div>

<script>
  let player;

  // YouTube API expects this function on window
  window.onYouTubeIframeAPIReady = function () {
    const YT = window.YT;
    if (!YT) return;

    player = new YT.Player("player", {
      height: "0",
      width: "0",
      videoId: "QNKf3yZQBOY",
      playerVars: {
        autoplay: 0,
        controls: 0,
      },
      events: {
        onReady: () => {
          const titleEl = document.getElementById("track-title");
          if (titleEl) titleEl.textContent = "From Tokyo";
        },
      },
    });
  };

  // Load YouTube IFrame API
  const tag = document.createElement("script");
  tag.src = "https://www.youtube.com/iframe_api";
  document.body.appendChild(tag);
</script>
